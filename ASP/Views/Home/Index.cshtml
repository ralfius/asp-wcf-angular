@using Common.Resources

@{
    ViewBag.Title = "Home Page";
}

<div class="row awa-users-page" ng-controller="UsersCtrl as usersVm">
    <h3 class="col-sm-12">@Titles.All_users</h3>

    @using (Html.BeginForm("", "", FormMethod.Get, htmlAttributes: new Dictionary<string, object> {
        { "class", "form-inline col-sm-12 awa-search-form" },
        { "validate-submit", "usersVm.initSearch()" }
    }))
    {
        <div class="form-group">
            @Html.Label("Search", labelText: Titles.Search)
            @Html.TextBox("Search", null, htmlAttributes: new Dictionary<string, object> {
                { "class", "form-control" },
                { "placeholder", Messages.SearchText },
                { "ng-model", "usersVm.search" },
                { "autocomplete", "off" }
            })
        </div>
        <button type="submit" class="btn btn-info">@Titles.Find</button>
    }

    <div class="col-sm-12">
        <users-list users="usersVm.usersPage.Items" on-update="usersVm.edit(user)" on-delete="usersVm.delete(user)"></users-list>
    </div>

    <div class="col-sm-12 awa-actions">
        <button class="btn btn-success awa-add-user" ng-click="usersVm.createUser()">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            @Titles.Add_new
        </button>
    </div>
</div>

<script type="text/ng-template" id="usersListComponent.html">
    @Html.Partial("Components/_UsersList")
</script>

<script type="text/ng-template" id="yesNoDialog.html">
    @Html.Partial("_YesNoDialog")
</script>

<script type="text/ng-template" id="editUserDialog.html">
    @Html.Partial("_EditUserDialog")
</script>

@section scripts{
    @Scripts.Render("~/bundles/jqueryval")
}